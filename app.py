import streamlit as st
import pandas as pd
from datetime import datetime

# ุฅุนุฏุงุฏุงุช ูุงุฌูุฉ ุงูุชุทุจูู
st.set_page_config(page_title="ุชูุฌูู ุจุฑู 2025", page_icon="๐", layout="centered")

# --- ูุงุนุฏุฉ ุจูุงูุงุช ุงููุฏุงุฑุณ (ุชุบุทู ุงููุบุฑุจ ูุงููุงู) ---
# ููุงุญุธุฉ: ุงูุนุชุจุงุช ูู ุชููุนุงุช ุจูุงุกู ุนูู ุงูุณููุงุช ุงูุฃุฎูุฑุฉ ูุนุงู 2025
schools_db = [
    {"name": "ูููุฉ ุงูุทุจ ูุงูุตูุฏูุฉ (FMP)", "cities": ["ุงูุฑุจุงุท", "ุงูุฏุงุฑ ุงูุจูุถุงุก", "ูุฑุงูุด", "ูุงุณ", "ูุฌุฏุฉ", "ุทูุฌุฉ", "ุฃูุงุฏูุฑ"], "shouba": ["svt", "pc", "math"], "seuil": 16.25},
    {"name": "ุงููุฏุงุฑุณ ุงููุทููุฉ ููุนููู ุงูุชุทุจูููุฉ (ENSA)", "cities": ["ุงููููุทุฑุฉ", "ุชุทูุงู", "ุงูุฌุฏูุฏุฉ", "ุฎุฑูุจูุฉ", "ุจุฑุดูุฏ", "ุงูุญุณููุฉ"], "shouba": ["math", "pc", "svt"], "seuil": 14.50},
    {"name": "ุงููุฏุงุฑุณ ุงููุทููุฉ ููุชุฌุงุฑุฉ ูุงูุชุณููุฑ (ENCG)", "cities": ["ุณุทุงุช", "ุทูุฌุฉ", "ุงููููุทุฑุฉ", "ุงูุฏุงุฑ ุงูุจูุถุงุก", "ูุงุณ"], "shouba": ["ุงููู"], "seuil": 13.50},
    {"name": "ุงูุฃูุณุงู ุงูุชุญุถูุฑูุฉ (CPGE)", "cities": ["ุงูุฑุจุงุท", "ุงูุฏุงุฑ ุงูุจูุถุงุก", "ูุฑุงูุด", "ูุงุณ"], "shouba": ["math", "pc"], "seuil": 16.50},
    {"name": "ุงููุฏุฑุณุฉ ุงูุนููุง ููุชูููููุฌูุง (EST)", "cities": ["ุณูุง", "ุงููุงุธูุฑ", "ุงููููู ุจู ุตุงูุญ", "ููููู", "ุงูุนููู"], "shouba": ["ุงููู"], "seuil": 12.00},
    {"name": "ุงููุนูุฏ ุงูุนุงูู ููููู ุงูุชูุฑูุถูุฉ (ISPITS)", "cities": ["ุงููุบุฑุจ ููู"], "shouba": ["svt", "pc", "math"], "seuil": 14.00},
    {"name": "ูุนูุฏ ุงููุนุงุฏู (IMT)", "cities": ["ูุฑุงูุด", "ุชููุณูุช"], "shouba": ["math", "pc"], "seuil": 13.00}
]

# --- ุงูุนููุงู ูุงููุงุฌูุฉ ---
st.title("๐ ูุณุชุดุงุฑู ุงูุฑููู ููุชูุฌูู (ูุณุฎุฉ 2025/2026)")
st.markdown("---")

# --- ุฌูุน ุจูุงูุงุช ุงูุทุงูุจ (ุงูููุฒ ุงูุฎุงุต ุจู) ---
with st.expander("๐ ุงุจุฏุฃ ููุง: ุฃุฏุฎู ุจูุงูุงุชู ููุญุตูู ุนูู ุงูุชูุฌูู"):
    name = st.text_input("ุงูุงุณู ุงููุงูู")
    email = st.text_input("ุงูุจุฑูุฏ ุงูุฅููุชุฑููู")
    phone = st.text_input("ุฑูู ุงููุงุชุณุงุจ (ููุชูุงุตู ูุนู ุจุงูุฌุฏูุฏ)")
    
# --- ูุฏุฎูุงุช ุงูููุท ---
col1, col2 = st.columns(2)
with col1:
    shouba = st.selectbox("ุดุนุจุฉ ุงูุจูุงููุฑูุง:", ["SVT", "PC", "Math", "Lettres", "Eco"])
with col2:
    note = st.number_input("ุงููุนุฏู ุงูุนุงู ุงููุชููุน (ุฃู ุงูุญุงูู):", 10.0, 20.0, 14.0)

selected_city = st.selectbox("ุงุฎุชุฑ ุงููุฏููุฉ ุงูุชู ุชูุถู ุงูุฏุฑุงุณุฉ ูููุง (ุฃู ุงููู):", ["ุงููุบุฑุจ ููู", "ุงูุฑุจุงุท", "ุงูุฏุงุฑ ุงูุจูุถุงุก", "ุงููููุทุฑุฉ", "ูุฑุงูุด", "ูุงุณ", "ุทูุฌุฉ", "ุฃูุงุฏูุฑ"])

# --- ูุนุงูุฌุฉ ุงููุชุงุฆุฌ ---
if st.button("๐ ุนุฑุถ ุงููุฏุงุฑุณ ุงููุชุงุญุฉ"):
    if not name or not phone:
        st.error("ุงูุฑุฌุงุก ุฅุฏุฎุงู ุงูุงุณู ูุฑูู ุงููุงุชู ูุญูุธ ูุชุงุฆุฌู.")
    else:
        # ุญูุธ ุงูุจูุงูุงุช (ุชุฎูู ูุฐุง ููุงุนุฏุฉ ุจูุงูุงุช)
        # ูู ุงููุณุฎุฉ ุงููุจุงุดุฑุฉ ุณูุฑุณู ูุฐู ุงูุจูุงูุงุช ูุฅููููู ุฃู ููู
        
        st.success(f"ุฃููุงู ุจู ูุง {name}! ุฅููู ูุงุฆูุฉ ุงููุฏุงุฑุณ ุงููุชููุนุฉ ูุนุงู 2025:")
        
        matches = []
        for school in schools_db:
            sh_match = shouba.lower() in school["shouba"] or "ุงููู" in school["shouba"]
            city_match = selected_city == "ุงููุบุฑุจ ููู" or selected_city in school["cities"]
            
            if sh_match and note >= school["seuil"] and city_match:
                matches.append(school)
        
        if matches:
            for s in matches:
                with st.container():
                    st.markdown(f"### โญ {s['name']}")
                    st.write(f"๐ **ุงููุฏู:** {', '.join(s['cities'])}")
                    st.write(f"๐ **ุงูุนุชุจุฉ ุงููุชููุนุฉ:** {s['seuil']}")
                    st.markdown("---")
        else:
            st.warning("ุจูุงุกู ุนูู ูุฐุง ุงููุนุฏูุ ููุตุญู ุจุงูุชุฑููุฒ ุนูู ูููุงุช ุงูุงุณุชูุทุงุจ ุงูููุชูุญ ุฃู ูุนุงูุฏ ุงูุชูููู ุงููููู.")

st.sidebar.info("ูุฐุง ุงูุชุทุจูู ูุฎุตุต ููุณุงุนุฏุฉ ุชูุงููุฐ ุจูุงููุฑูุง 2025 ูู ุชุฎุทูุท ูุณุงุฑูู ุงูุฏุฑุงุณู.")
